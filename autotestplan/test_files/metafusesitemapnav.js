function PI_SiteMapNav_SetupNavigationMenu(clientID,resClientID,menuItemClass){var client=GetElementById(clientID);if(client==null){return;}if(UITools.GetPIAttr(client,"site-map-nav-setup")!="1"){var $topItems=$('.'+menuItemClass+',.'+menuItemClass+' > a');if(menuItemClass==null){menuItemClass="mainnav-item";}$topItems.click(function(e){var $nav=$("#"+clientID);var $el=$(e.target);if($el.prop("tagName")=="IMG"){$el=$el.parent();}var $li=null;if($el[0].tagName=="LI"){$li=$el;}else if($el.parent()[0].tagName=="LI"){$li=$el.parent();}if($li!=null&&$li.length>0&&!$li.hasClass("mainnav-li-nochildren")){var css="";var classString=$li.attr("class");if(classString!=null&&classString!=""){var classes=classString.toString().split(' ');if(classes!=null&&classes.length>0){css=classes[0];}}if(css!=""){$li=$(e.target).closest("li");if($li.hasClass(css+"-hover")){var $lisToOpen=null;if($nav.children(":first").length==0){$lisToOpen=$("."+css).not("."+css+"-hover");}$li.children('div.'+css+"-child").slideUp(null,function(){if($lisToOpen!=null){$lisToOpen.slideDown();}$li.removeClass(css+"-hover");});}else{$("."+menuItemClass).removeClass(css+"-hover");$li.addClass(css+"-hover");if($nav.children(":first").length==0){var $lisToClose=$("div."+css).not("div."+css+"-hover");$lisToClose.slideUp();}$('div.'+css+"-child").slideUp();$childMenu=$li.children('div.'+css+"-child");$childMenu.slideDown();}e.stopPropagation();return false;}}});UITools.SetPIAttr(client,"site-map-nav-setup","1")}};function PI_SiteMapNav_ToggleMainNavResponsive(e,clientID,resClientID,menuItemClass,widthString,heightString,speedOpen,speedClose){if(clientID!=null){PI_SiteMapNav_SetupNavigationMenu(clientID,resClientID,menuItemClass);}else{PI_SiteMapNav_SetupNavigationMenu(resClientID,resClientID,menuItemClass);}var $navresp=$("#"+resClientID);if($navresp.css("display")!="none"){return;}if(widthString==null&&heightString==null){widthString="40%";}if(!speedOpen){speed="fast";}var vertical=false;var $nav=null;if(clientID){$nav=$("#"+clientID);}if($nav==null||$nav.children(":first").length>0){var speed="fast";if(widthString){if($nav){var $navmenu=$nav.children(":first");$navmenu.appendTo($navresp);}$navresp.height($(document).height());$navresp.width(0);$navresp.show();$navresp.animate({width:widthString},speed,null,function(){$("#allcontent").on("click",function(e){PI_SiteMapNav_CloseMainNavResponsive(clientID,resClientID,menuItemClass,null,false);});});}else{vertical=true;if($nav){var $navmenu=$nav.children(":first");$navmenu.appendTo($navresp);}UITools.Show($navresp.children()[0]);$navresp.height(heightString);$navresp.show();$navresp.animate({height:heightString},speed,null,function(){$("#allcontent").on("click",function(e){PI_SiteMapNav_CloseMainNavResponsive(clientID,resClientID,menuItemClass,null,vertical);});});}}else{PI_SiteMapNav_CloseMainNavResponsive(clientID,resClientID,menuItemClass,null,vertical);}return;};function PI_SiteMapNav_CloseMainNavResponsive(clientID,resClientID,menuItemClass,handler,vertical,speedClose){if(!speedClose){speedClose="fast";}$("#allcontent").off("click");if(menuItemClass==null){menuItemClass="mainnav-item";}var $navresp=$("#"+resClientID);if($navresp.children(":first").length>0){var $navmenu=$navresp.children(":first");var $nav=null;if(clientID!=null&&clientID!=""){$nav=$("#"+clientID);}if(!vertical){$navresp.animate({width:'0px'},speedClose,function(){$("."+menuItemClass).removeClass(menuItemClass+"-hover");$("."+menuItemClass+"-child").removeClass(menuItemClass+"child-hover");$("."+menuItemClass+"-child-child").removeClass(menuItemClass+"child-child-hover");$("."+menuItemClass+" -child-child-child").removeClass(menuItemClass+"child-child-child-hover");$('.'+menuItemClass).css('display','');if($nav!=null){$navmenu.appendTo($nav);}$('div.'+menuItemClass+'-child').hide();$('div.'+menuItemClass+'-child-child').hide();$('div.'+menuItemClass+'-child-child-child').hide();$navresp.hide();});}else{$navresp.animate({height:'0px'},speedClose,function(){$("."+menuItemClass).removeClass(menuItemClass+"-hover");$("."+menuItemClass+"-child").removeClass(menuItemClass+"child-hover");$("."+menuItemClass+"-child-child").removeClass(menuItemClass+"child-child-hover");$("."+menuItemClass+" -child-child-child").removeClass(menuItemClass+"child-child-child-hover");$('.'+menuItemClass).css('display','');if($nav!=null){$navmenu.appendTo($nav);}$('div.'+menuItemClass+'-child').hide();$('div.'+menuItemClass+'-child-child').hide();$('div.'+menuItemClass+'-child-child-child').hide();$navresp.hide();});}}};(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover)}})(jQuery);