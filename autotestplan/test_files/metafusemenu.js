var mfiSimpleMenuCurrentContextMenu=null;function MetafuseMenu(javaScriptObjectId,uniqueID,enableTopMenuShowItemsOnHover,defaultMenuItemChildrenAlignment,defaultMenuItemExpandDirection,defaultTopItemExpandDirection,menuItems,defaultTopMenuItemClass,defaultMenuItemClass,defaultTopMenuItemHoverClass,defaultTopMenuItemExpandedClass,defaultTopMenuItemSelectedClass,defaultMenuItemHoverClass,defaultMenuItemExpandedClass,defaultMenuItemSelectedClass,defaultMenuItemTextClass,defaultMenuItemBreakClass,disableRightIconChildIndicator,includeDefaultRightIconWhenNoChildrenExist,navigateSubMenuKey,navigateParentMenuKey,navigateForward,navigateBackward){this.JavaScriptObjectId=javaScriptObjectId;this.UniqueID=uniqueID;this.EnableTopMenuShowItemsOnHover=false;if(enableTopMenuShowItemsOnHover){this.EnableTopMenuShowItemsOnHover=true;}this.DefaultMenuItemChildrenAlignment=defaultMenuItemChildrenAlignment;this.DefaultMenuItemExpandDirection=defaultMenuItemExpandDirection;this.DefaultTopItemExpandDirection=defaultTopItemExpandDirection;this.MenuItems=menuItems;this.DefaultTopMenuItemClass="menu-top-item";if(defaultTopMenuItemClass!=null&&defaultTopMenuItemClass!=""){this.DefaultTopMenuItemClass=defaultTopMenuItemClass;}this.DefaultTopMenuItemHoverClass=this.DefaultTopMenuItemClass+"-hover";this.DefaultTopMenuItemExpandedClass=this.DefaultTopMenuItemClass+"-expanded";this.DefaultTopMenuItemSelectedClass=this.DefaultTopMenuItemClass+"-selected";if(defaultTopMenuItemHoverClass!=null&&defaultTopMenuItemHoverClass!=""){this.DefaultTopMenuItemHoverClass=defaultTopMenuItemHoverClass;}if(defaultTopMenuItemExpandedClass!=null&&defaultTopMenuItemExpandedClass!=""){this.DefaultTopMenuItemExpandedClass=defaultTopMenuItemExpandedClass;}if(defaultTopMenuItemSelectedClass!=null&&defaultTopMenuItemSelectedClass!=""){this.DefaultTopMenuItemSelectedClass=defaultTopMenuItemSelectedClass;}this.DefaultMenuItemClass="menu-item";if(defaultMenuItemClass!=null&&defaultMenuItemClass!=""){this.DefaultMenuItemClass=defaultMenuItemClass;}this.MenuGroupCssClass=this.DefaultMenuItemClass+"-group";this.DefaultMenuItemHoverClass=this.DefaultMenuItemClass+"-hover";this.DefaultMenuItemExpandedClass=this.DefaultMenuItemClass+"-expanded";this.DefaultMenuItemSelectedClass=this.DefaultMenuItemClass+"-selected";this.DefaultMenuItemTextClass=this.DefaultMenuItemClass+"-text";this.DefaultMenuItemBreakClass=this.DefaultMenuItemClass+"-break";if(defaultMenuItemHoverClass!=null&&defaultMenuItemHoverClass!=""){this.DefaultMenuItemHoverClass=defaultMenuItemHoverClass;}if(defaultMenuItemExpandedClass!=null&&defaultMenuItemExpandedClass!=""){this.DefaultMenuItemExpandedClass=defaultMenuItemExpandedClass;}if(defaultMenuItemSelectedClass!=null&&defaultMenuItemSelectedClass!=""){this.DefaultMenuItemSelectedClass=defaultMenuItemSelectedClass;}if(defaultMenuItemTextClass!=null&&defaultMenuItemTextClass!=""){this.DefaultMenuItemTextClass=defaultMenuItemTextClass;}if(defaultMenuItemBreakClass!=null&&defaultMenuItemBreakClass!=""){this.DefaultMenuItemBreakClass=defaultMenuItemBreakClass;}this.DisableRightIconChildIndicator=disableRightIconChildIndicator;this.IncludeDefaultRightIconWhenNoChildrenExist=includeDefaultRightIconWhenNoChildrenExist;this.NavigateSubMenuKey=190;this.NavigateParentMenuKey=188;this.NavigateForward=78;this.NavigateBackward=66;if(navigateSubMenuKey!=null){this.NavigateSubMenuKey=navigateSubMenuKey;}if(navigateParentMenuKey!=null){this.NavigateParentMenuKey=navigateParentMenuKey;}if(navigateForward!=null){this.NavigateForward=navigateForward;}if(navigateBackward!=null){this.NavigateBackward=navigateBackward;}this.ContextMenuElementId=this.JavaScriptObjectId+"_ContextMenuDiv";this.ContextMenuElement=null;this.DisableContextMenu=false;this.CurrentMenuGroupOver=null;this.CurrentMenuItemOver=null;this.CurrentContextMenu=null;this.zIndex=30000;this.ShowContextMenuMousePageXCoordinate=null;this.ShowContextMenuMousePageYCoordinate=null;this.OnBeforeShowContextMenu=function(contextMenu){return true;};this.OnBeforeShowContextMenuDiv=function(contextMenu){return true;};this.OnBeforeAjaxMenuItemClickedPostBack=function(element,commandName,eventArgument){return true;};this.OnAfterHideContextMenu=function(contextMenu){};this.CollapseNodeRequestTimeout=200;this.CollapseTopNodeRequestTimeout=200;};function MMI(id,text,imageUrl,click,anchorHref,icon,rightIcon,helpText,hasChildren,isBreakItem,menuItemExpandDirection,selected,childGroupColumnCount,menuItems,loadChildrenDynamicallyEventArgument,cssMenuItemClass,cssMenuItemHoverClass,cssMenuItemExpandedClass,cssMenuItemTextClass,cssMenuItemBreakClass,cssSelectedMenuItemClass){this.Id="";this.Text="";this.ImageUrl="";this.Click="";this.Icon="";this.RightIcon="";this.HelpText="";this.AnchorHref="";if(id!=null){this.Id=id;}if(text!=null){this.Text=text;}if(imageUrl!=null){this.ImageUrl=imageUrl;}if(click!=null){this.Click=click;}if(icon!=null){this.Icon=icon;}if(rightIcon!=null){this.RightIcon=rightIcon;}if(helpText!=null){this.HelpText=helpText;}this.HasChildren=false;if(hasChildren==1){this.HasChildren=true;}this.MenuItemExpandDirection=null;if(menuItemExpandDirection!=null&&menuItemExpandDirection>=0){this.MenuItemExpandDirection=menuItemExpandDirection;}this.IsSelected=false;if(selected==1){this.IsSelected=true;}this.ChildGroupColumnCount=1;if(childGroupColumnCount!=null){this.ChildGroupColumnCount=childGroupColumnCount;}this.IsBreakItem=false;if(isBreakItem==1){this.IsBreakItem=true;}this.AnchorHref="";if(anchorHref!=null){this.AnchorHref=anchorHref;}this.MenuItems=menuItems;this.LoadChildrenDynamicallyEventArgument=loadChildrenDynamicallyEventArgument;this.CurrentlyLoadingChildren=false;this.CssMenuItemClass="";if(cssMenuItemClass!=null){this.CssMenuItemClass=cssMenuItemClass;}this.CssMenuItemHoverClass="";if(cssMenuItemHoverClass!=null){this.CssMenuItemHoverClass=cssMenuItemHoverClass;}this.CssMenuItemExpandedClass="";if(cssMenuItemExpandedClass!=null){this.CssMenuItemExpandedClass=cssMenuItemExpandedClass;}this.CssMenuItemTextClass="";if(cssMenuItemTextClass!=null){this.CssMenuItemTextClass=cssMenuItemTextClass;}this.CssMenuItemBreakClass="";if(cssMenuItemBreakClass!=null){this.CssMenuItemBreakClass=cssMenuItemBreakClass;}this.CssSelectedMenuItemClass="";if(cssSelectedMenuItemClass!=null){this.CssSelectedMenuItemClass=cssSelectedMenuItemClass;}this.ChildElement=null;this.ChildElementShim=null;this.TableElementId=null;this.TableElement=null;this.ContainerNode=null;this.Indices=null;this.zIndex=7500;};MetafuseMenu.prototype.S=MetafuseMenu_TopNodeMouseOver;function MetafuseMenu_TopNodeMouseOver(element,menuItemIndex){var menuItem=this.MenuItems[menuItemIndex];this.CurrentMenuGroupOver=menuItem;if(menuItem.Indices==null){menuItem.Indices=new Array(new Number(menuItemIndex));}if(menuItem.ContainerNode==null){menuItem.ContainerNode=this;}if(menuItem.TableElementId==null){var tableId=this.JavaScriptObjectId+"_Item_"+menuItemIndex.toString();menuItem.TableElementId=tableId;menuItem.TableElement=GetElementById(tableId);}if(menuItem.CssMenuItemHoverClass!=""){$(element).addClass(menuItem.CssMenuItemHoverClass);}else{$(element).addClass(this.DefaultTopMenuItemHoverClass);}this.ShowChildMenuItems(element,menuItem);};MetafuseMenu.prototype.SM=MetafuseMenu_TopNodeMenuClick;function MetafuseMenu_TopNodeMenuClick(localEvent,element,menuItemIndex){var menuItem=this.MenuItems[menuItemIndex];this.CurrentMenuGroupOver=menuItem;if(menuItem.Indices==null){menuItem.Indices=new Array(new Number(menuItemIndex));}if(menuItem.ContainerNode==null){menuItem.ContainerNode=this;}if(menuItem.TableElementId==null){var tableId=this.JavaScriptObjectId+"_Item_"+menuItemIndex.toString();menuItem.TableElementId=tableId;menuItem.TableElement=GetElementById(tableId);}if(menuItem.CssMenuItemHoverClass!=""){$(element).addClass(menuItem.CssMenuItemHoverClass);}else{$(element).addClass(this.DefaultTopMenuItemHoverClass);}this.ShowChildMenuItems(element,menuItem);UITools.CancelBubble(localEvent);var self=this;if(!this.EnableTopMenuShowItemsOnHover){var hideFunction=function(event){var shownElement=null;if(self.CurrentMenuItemOver&&self.CurrentMenuItemOver.TableElement){shownElement=self.CurrentMenuItemOver.TableElement;}if(shownElement==null||($(shownElement).is(event.target)==false&&$(shownElement).has(event.target).length===0)){self.CurrentMenuGroupOver=null;self.CurrentMenuItemOver=null;self.H(element,menuItemIndex,true);$(document).off("click",hideFunction);UITools.CancelBubble(event);return false;}};$(document).on("click",hideFunction);}return false;};MetafuseMenu.prototype.H=MetafuseMenu_TopNodeMouseOut;function MetafuseMenu_TopNodeMouseOut(element,indices,clickClose){this.CurrentMenuGroupOver=null;var menuItem=this.FindMenuItemNode(indices);if(menuItem.CssMenuItemHoverClass!=""){$(element).removeClass(menuItem.CssMenuItemHoverClass);}else{$(element).removeClass(this.DefaultTopMenuItemHoverClass);}if(this.ContextMenuElement!=null){this.CollapseNodeRequest(indices,this.CollapseNodeRequestTimeout,clickClose);}else{var timeout=this.CollapseTopNodeRequestTimeout;if(clickClose){timeout=0;}this.CollapseNodeRequest(indices,timeout,clickClose);}};MetafuseMenu.prototype.ItemNodeGroupMouseOver=MetafuseMenu_ItemNodeGroupMouseOver;function MetafuseMenu_ItemNodeGroupMouseOver(indices){var menuItem=this.FindMenuItemNode(indices);this.CurrentMenuGroupOver=menuItem;var containerNode=menuItem;while(containerNode!=this){if(containerNode.ContainerNode==this){if(containerNode.CssMenuItemExpandedClass!=""){$(containerNode.TableElement).addClass(containerNode.CssMenuItemExpandedClass);}else{$(containerNode.TableElement).addClass(this.DefaultTopMenuItemExpandedClass);}}else{if(containerNode.CssMenuItemExpandedClass!=""){$(containerNode.TableElement).addClass(containerNode.CssMenuItemExpandedClass);}else{$(containerNode.TableElement).addClass(this.DefaultMenuItemExpandedClass);}}containerNode=containerNode.ContainerNode;}};MetafuseMenu.prototype.ItemNodeGroupMouseOut=MetafuseMenu_ItemNodeGroupMouseOut;function MetafuseMenu_ItemNodeGroupMouseOut(indices){this.CurrentMenuGroupOver=null;this.CollapseNodeRequest(indices,this.CollapseNodeRequestTimeout);var menuItem=this.FindMenuItemNode(indices);containerNode=menuItem;};MetafuseMenu.prototype.ItemNodeMouseOver=MetafuseMenu_ItemNodeMouseOver;function MetafuseMenu_ItemNodeMouseOver(element,indices){var menuItem=this.FindMenuItemNode(indices);this.CurrentMenuItemOver=menuItem;if(!menuItem.IsBreakItem){if(menuItem.CssMenuItemHoverClass!=""){$(element).addClass(menuItem.CssMenuItemHoverClass);}else{$(element).addClass(this.DefaultMenuItemHoverClass);}}this.ShowChildMenuItems(element,menuItem);};MetafuseMenu.prototype.ItemNodeMouseOut=MetafuseMenu_ItemNodeMouseOut;function MetafuseMenu_ItemNodeMouseOut(element,indices){this.CurrentMenuItemOver=null;var menuItem=this.FindMenuItemNode(indices);if(menuItem.CssMenuItemHoverClass!=""){$(element).removeClass(menuItem.CssMenuItemHoverClass);}else{$(element).removeClass(this.DefaultMenuItemHoverClass);}this.CollapseNodeRequest(indices,this.CollapseNodeRequestTimeout);};MetafuseMenu.prototype.CollapseNodeRequest=MetafuseMenu_CollapseNodeRequest;function MetafuseMenu_CollapseNodeRequest(indices,timeout,clickClose){if(timeout&&timeout>0){if(indices){if(indices.toString()!=""){if(indices.toString().indexOf(",")<0){indices="'"+indices+"'";}}}var clickCloseString="";if(clickClose){clickCloseString=",true";}setTimeout(this.JavaScriptObjectId+".CollapseChildNode(new Array("+indices+"),"+timeout+clickCloseString+");",timeout);}else{this.CollapseChildNode(new Array(indices),0,clickClose)}};MetafuseMenu.prototype.CollapseChildNode=MetafuseMenu_CollapseChildNode;function MetafuseMenu_CollapseChildNode(indices,timeout,clickClose){var menuItem=this.FindMenuItemNode(indices);if(menuItem&&(menuItem.ContainerNode!=this||clickClose||this.EnableTopMenuShowItemsOnHover||this.CurrentContextMenu==this)){if(this.CurrentMenuGroupOver==null||this.CurrentMenuGroupOver!=menuItem){var collapse=true;if(this.CurrentMenuGroupOver!=null){if(menuItem.ContainerNode==this.CurrentMenuItemOver){collapse=false;}else{var containerNode=this.CurrentMenuGroupOver;while(containerNode!=null){if(containerNode==this){containerNode=null;break;}if(containerNode!=null){if(menuItem==containerNode){collapse=false;break;}}containerNode=containerNode.ContainerNode;}}}if(collapse){var col=true;if(menuItem.MenuItems!=null){for(var i=0;i<menuItem.MenuItems.length;i++){var mi=menuItem.MenuItems[i];if(mi==this.CurrentMenuGroupOver||mi==this.CurrentMenuItemOver){col=false;break;}}}if(col){if(menuItem.ContainerNode!=this.CurrentMenuItemOver&&menuItem!=this.CurrentMenuItemOver){if(menuItem.CssMenuItemExpandedClass!=""){$(menuItem.TableElement).removeClass(menuItem.CssMenuItemExpandedClass);}else{if(menuItem.ContainerNode==this){$(menuItem.TableElement).removeClass(this.DefaultTopMenuItemExpandedClass);}else{$(menuItem.TableElement).removeClass(this.DefaultMenuItemExpandedClass);}}if(menuItem.ChildElement!=null){menuItem.ChildElement.style.display="none";if(menuItem.ChildElementShim!=null){menuItem.ChildElementShim.style.display="none";}}if(menuItem.ContainerNode!=null){this.CollapseNodeRequest(menuItem.ContainerNode.Indices,timeout);}}}}}}};MetafuseMenu.prototype.FindMenuItemNode=MetafuseMenu_FindMenuItemNode;function MetafuseMenu_FindMenuItemNode(indices){var menuItem=this;for(var i=0;i<indices.length;i++){if(menuItem==null||menuItem.MenuItems==null){return null;}menuItem=menuItem.MenuItems[indices[i]];}return menuItem;};MetafuseMenu.prototype.FindMenuItemNodeById=MetafuseMenu_FindMenuItemNodeById;function MetafuseMenu_FindMenuItemNodeById(id,menuItem){if(menuItem==null){menuItem=this;}if(menuItem.MenuItems!=null&&menuItem.MenuItems.length>0){for(var i=0;i<menuItem.MenuItems.length;i++){var menuItemToTest=menuItem.MenuItems[i];if(menuItemToTest.Id==id){return menuItemToTest;}else{menuItemToTest=this.FindMenuItemNodeById(id,menuItemToTest);if(menuItemToTest!=null){return menuItemToTest;}}}}return null;};MetafuseMenu.prototype.ShowChildMenuItems=MetafuseMenu_ShowChildMenuItems;function MetafuseMenu_ShowChildMenuItems(element,containerNode){var div=null;var alignment;if(containerNode.ChildElement!=null){div=containerNode.ChildElement;}else if(containerNode.MenuItems!=null){if(containerNode.MenuItems.length>0){div=this.CreateChildMenuItemsDiv(containerNode);}}else if(containerNode.LoadChildrenDynamicallyEventArgument!=null&&containerNode.LoadChildrenDynamicallyEventArgument!=""){this.AjaxLoadChildren(element,containerNode);return;}if(containerNode.MenuItemExpandDirection!=null){alignment=containerNode.MenuItemExpandDirection;}else if(containerNode.ContainerNode==this){alignment=this.DefaultTopItemExpandDirection;}else{alignment=this.DefaultMenuItemExpandDirection;}if(div!=null&&div.style.display!="block"){var windowWidth=UITools.GetWindowWidth();var windowHeight=UITools.GetWindowHeight();var scrollLeft=UITools.GetScrollLeft();var scrollTop=UITools.GetScrollTop();var zIndex=div.zIndex;div.x=0+scrollLeft;div.y=0+scrollTop;div.zIndex=-1;div.style.visibility="hidden";div.style.display="block";var offsetWidth=div.offsetWidth;var offsetHeight=div.offsetHeight;var x=UITools.GetPageXCoordinate(element);var y=GetPageYCoordinate(element);var parentWidth=element.offsetWidth;var parentHeight=element.offsetHeight;if(alignment==0){x=x;y=y+parentHeight;}else if(alignment==1){x=x+parentWidth-5;y=y;}div.style.left=x+"px";div.style.top=y+"px";if(alignment==0){if((x+offsetWidth)>(windowWidth-scrollLeft)){x=x+parentWidth-offsetWidth+2;if(x<0){x=0;}div.style.left=x+"px";}}else if(alignment==1){if((x+offsetWidth)>(windowWidth-scrollLeft)){x=x-parentWidth-offsetWidth;if(x<scrollLeft){x=scrollLeft;}x=x+9;div.style.left=x+"px";}if((y+offsetHeight)>(windowHeight+scrollTop)){y=y-offsetHeight+parentHeight;if(y<scrollTop){y=scrollTop;}div.style.top=y+"px";}}div.zIndex=zIndex;div.style.visibility="visible";if(containerNode.ChildElementShim!=null){var shim=containerNode.ChildElementShim;shim.style.display="";if(BrowserTools.IsInternetExplorer()){shim.style.width=div.offsetWidth-2+"px";shim.style.height=div.offsetHeight-2+"px";}shim.style.top=div.style.top;shim.style.left=div.style.left;shim.style.zIndex=div.style.zIndex-1;shim.style.display="";}}};MetafuseMenu.prototype.CreateChildMenuItemsDiv=MetafuseMenu_CreateChildMenuItemsDiv;function MetafuseMenu_CreateChildMenuItemsDiv(containerNode,contextMenuDivId){var groupIndicesString="";var tableIdBase=this.JavaScriptObjectId+"_Item_";var divId="";if(containerNode!=this){groupIndicesString=containerNode.Indices.toString();divId=this.JavaScriptObjectId+"_"+groupIndicesString;tableIdBase+=groupIndicesString+",";}if(groupIndicesString.toString().indexOf(",")<0){groupIndicesString="'"+groupIndicesString+"'";}var divText="";var dropShadowStyle="";if(contextMenuDivId!=null&&contextMenuDivId!=""){divId=contextMenuDivId;divText="<table id=\""+divId+"\" style=\"position:absolute;left:0px;top:0px;z-index:"+5100+";display:none;visibility=visible;"+dropShadowStyle+"\" class=\""+this.MenuGroupCssClass+"\">"+this.ConstructMenuItemTable(containerNode)+"</table>";}else{divText="<table id=\""+divId+"\" onmouseover=\""+this.JavaScriptObjectId+".ItemNodeGroupMouseOver(new Array("+groupIndicesString.toString()+"));\" onmouseout=\""+this.JavaScriptObjectId+".ItemNodeGroupMouseOut(new Array("+groupIndicesString.toString()+"));\" style=\"position:absolute;left:0px;top:0px;z-index:"+containerNode.zIndex+";display:none;visibility=visible;"+dropShadowStyle+"\" class=\""+this.MenuGroupCssClass+"\">"+this.ConstructMenuItemTable(containerNode)+"</table>";}var div=GetElementById(divId);if(div){div.parentNode.removeChild(div);}UITools.InsertHTML(divText);div=GetElementById(divId);containerNode.ChildElement=div;for(var i=0;i<containerNode.MenuItems.length;i++){var menuItem=containerNode.MenuItems[i];var childTableId=tableIdBase+i.toString();var table=GetElementById(childTableId);menuItem.TableElement=table;}containerNode.ChildElementShim=UITools.GetElementShim(divId);return div;};MetafuseMenu.prototype.ConstructMenuItemTable=MetafuseMenu_ConstructMenuItemTable;function MetafuseMenu_ConstructMenuItemTable(containerNode){var table="";var tableBase=this.JavaScriptObjectId+"_Item_";if(containerNode!=this){var tableIndicesString=containerNode.Indices.toString();tableBase+=tableIndicesString+",";}var vertMenuColumns=containerNode.ChildGroupColumnCount;if(vertMenuColumns==null){vertMenuColumns=1;}var columnCount=0;var totalLength=containerNode.MenuItems.length;for(var i=0;i<totalLength;i++){var m=containerNode.MenuItems[i];if(m.IsBreakItem){if(i==0||this.DefaultMenuItemChildrenAlignment==1){table+="<tr>";}var cssMenuItemBreakClass=m.CssMenuItemBreakClass;if(cssMenuItemBreakClass==""){cssMenuItemBreakClass=this.DefaultMenuItemBreakClass}table+="<td class=\""+cssMenuItemBreakClass+"\"></td>";if(i==totalLength||this.DefaultMenuItemChildrenAlignment==1){table+="</tr>";}}else{var tableId=tableBase+i.toString();m.zIndex=containerNode.zIndex+1;m.ContainerNode=containerNode;if(containerNode!=this){m.Indices=containerNode.Indices.slice(0,containerNode.Indices.length);}else{m.Indices=new Array();}m.Indices[m.Indices.length]=i;if(i==0||(this.DefaultMenuItemChildrenAlignment==1&&columnCount==0)){table+="<tr>";}table+="<td><table id=\""+tableId+"\" width=\"100%\" class=\"W100 ";if(m.CssMenuItemClass!=""){table+=m.DefaultMenuItemClass;}else{table+=this.DefaultMenuItemClass;}if(m.IsSelected){if(m.CssSelectedMenuItemClass!=""){table+=" "+m.CssSelectedMenuItemClass;}else{table+=" "+this.DefaultMenuItemSelectedClass;}}table+="\" onmousedown=\"return "+this.JavaScriptObjectId+".MMMD(this);\" ";if(m.Click!=""){table+="onclick=\""+m.Click+";\" ";}var indices=m.Indices.toString();if(containerNode!=this){table+="onmouseover=\""+this.JavaScriptObjectId+".ItemNodeMouseOver(this,new Array("+indices+"));\" ";table+="onmouseout=\""+this.JavaScriptObjectId+".ItemNodeMouseOut(this,new Array("+indices+"));\"  ";}else{table+="onmouseover=\""+this.JavaScriptObjectId+".S(this,"+i.toString()+");\" ";table+="onmouseout=\""+this.JavaScriptObjectId+".H(this,new Array('"+indices+"'));\"  ";indices=i.toString();}if(m.HelpText!=null&&m.HelpText!=null){table+=" title=\""+m.HelpText+"\"";}table+="><tr>";table+="<td>";var leftIcon=m.Icon;if(leftIcon!=""){table+="<img src=\""+leftIcon+"\" />";}else{table+="<div/>";}table+="</td>";table+="<td width=\"100%\" ";if(m.CssMenuItemTextClass!=""){table+="class=\"W100 "+m.CssMenuItemTextClass+"\">";}else if(this.DefaultMenuItemTextClass){table+="class=\"W100 "+this.DefaultMenuItemTextClass+"\">";}else{table+="class=\"W100\">";}var includeAnchor=true;if(m.Text.toString().toLowerCase().indexOf("<span id=")>=0&&m.Text.toString().toLowerCase().indexOf("</a>")>=0){includeAnchor=false;}if(includeAnchor){table+="<a id=\"A_"+tableId+"\" tabindex=\"-1\" ";if(m.AnchorHref!=""){table+="href=\""+m.AnchorHref+"\" ";}else{table+="href=\"javascript:;\" ";}if(m.Click!=""){table+="onclick=\"event.cancelBubble=true;"+m.Click+";return false;\" ";}if(containerNode!=this){table+="onfocus=\""+this.JavaScriptObjectId+".ItemNodeMouseOver(this.offsetParent.offsetParent,new Array("+indices+"));\" ";table+="onblur=\""+this.JavaScriptObjectId+".ItemNodeMouseOut(this.offsetParent.offsetParent,new Array("+indices+"));\" ";}else{table+="onfocus=\""+this.JavaScriptObjectId+".S(this.offsetParent.offsetParent,"+i.toString()+");\" ";table+="onblur=\""+this.JavaScriptObjectId+".H(this.offsetParent.offsetParent,new Array('"+indices+"'));\" ";}table+="onkeydown=\""+this.JavaScriptObjectId+".MMKD(event, this, '"+indices+"');\" ";table+=">"}if(m.ImageUrl!=""){table+="<img src=\""+m.ImageUrl+"\" border=\"0\" />";}else{table+=m.Text;}if(includeAnchor){table+="</a>";}if(this.DisableRightIconChildIndicator!=1){table+="<td>";var rightIcon=m.RightIcon;if(rightIcon==""){if(this.IncludeDefaultRightIconWhenNoChildrenExist||m.HasChildren){table+="<div/>";}}else if(rightIcon!=""){table+="<img src=\""+rightIcon+"\">";}table+="</td>";}table+="</td></tr></table></td>";columnCount+=1;if(i==totalLength||(this.DefaultMenuItemChildrenAlignment==1&&columnCount==vertMenuColumns)){table+="</tr>";columnCount=0;}}}return table;};MetafuseMenu.prototype.MMMD=MetafuseMenu_MouseDown;function MetafuseMenu_MouseDown(tableElement){UITools.FocusOnElement(tableElement);return false;};MetafuseMenu.prototype.ContextMenuShow=MetafuseMenu_ContextMenuShow;MetafuseMenu.prototype.ContextMenuMouseUp=MetafuseMenu_ContextMenuShow;function MetafuseMenu_ContextMenuShow(localEvent,x,y){if(this.DisableContextMenu==false){if(localEvent!=null&&localEvent.target!=null&&localEvent.target.tagName=="A"||localEvent.target.tagName=="IMG"){var anchor=null;if(localEvent.target.tagName=="A"){anchor=localEvent.target;}else if(localEvent.target.parentElement.tagName=="A"){anchor=localEvent.target.parentElement;}if(anchor!=null){if(anchor.getAttribute("data-href")!=null&&anchor.getAttribute("data-href")!=""){return true;}else if(anchor.getAttribute("data-iid")!=null&&anchor.getAttribute("data-iid")!=""){return true;}}}if(this.CurrentContextMenu!=this){if(this.CurrentContextMenu!=null){this.CurrentContextMenu.ContextMenuHide();}if(this.OnBeforeShowContextMenu(this)){var element=this.ContextMenuElement;if(element==null){var addEventHandler=false;if(GetElementById(this.ContextMenuElementId)==null){addEventHandler=true;}element=this.CreateChildMenuItemsDiv(this,this.ContextMenuElementId);if(addEventHandler){AddEventHandlerToElement(document,'onmousedown',new Function("event",this.JavaScriptObjectId+".ContextMenuMouseDown(event)"));}}if(this.OnBeforeShowContextMenuDiv(this)){if(localEvent==null&&x!=null&&y!=null){UITools.ShowDivAndIFrameAtXY(x,y,element,null,-20,-20);}else{this.ShowContextMenuMousePageYCoordinate=UITools.GetEventPageYCoordinate(localEvent);this.ShowContextMenuMousePageXCoordinate=UITools.GetEventPageXCoordinate(localEvent);UITools.ShowDivAndIFrameAtEvent(localEvent,element,null,-20,-20);}}this.CurrentContextMenu=this;this.ContextMenuElement=element;}else{return true;}}UITools.CancelBubble(localEvent);return false;}return true;};MetafuseMenu.prototype.ContextMenuMouseDown=MetafuseMenu_ContextMenuMouseDown;function MetafuseMenu_ContextMenuMouseDown(localEvent){if(this==this.CurrentContextMenu){if(localEvent.button==2){this.ContextMenuHide();return true;}else{setTimeout(this.JavaScriptObjectId+".ContextMenuHide()",(this.CollapseNodeRequestTimeout+150));return false;}}return true;};MetafuseMenu.prototype.ContextMenuHide=MetafuseMenu_ContextMenuHide;function MetafuseMenu_ContextMenuHide(disableContextMenu){if(this==this.CurrentContextMenu){this.CurrentContextMenu=null;this.CurrentMenuGroupOver=null;this.CurrentMenuItemOver=null;this.CollapseChildNodesAndRemoveTableElementRecursively(this,true);UITools.HideDivAndIFrame(this.ContextMenuElementId);if(disableContextMenu){this.DisableContextMenu=true;MetafuseMenu_ContextMenuEnableDefaultContextMenu();}this.OnAfterHideContextMenu(this);}};MetafuseMenu.prototype.MenuMouseDown=MetafuseMenu_MenuMouseDown;function MetafuseMenu_MenuMouseDown(localEvent){if(this==this.CurrentContextMenu){if(localEvent.button==2){this.ContextMenuHide();return true;}else{setTimeout(this.JavaScriptObjectId+".ContextMenuHide()",(this.CollapseNodeRequestTimeout+150));return false;}}return true;};MetafuseMenu.prototype.OpenLinkInNewTab=MetafuseMenu_OpenLinkInNewTab;function MetafuseMenu_OpenLinkInNewTab(self){alert(self);};function MetafuseMenu_ContextMenuDisableDefaultContextMenu(){document.oncontextmenu=function(){return false};if(document.layers){window.captureEvents(Event.MOUSEDOWN);window.onmousedown=function(e){if(e.target==document){return false;};};};};function MetafuseMenu_ContextMenuEnableDefaultContextMenu(){document.oncontextmenu=function(){return true};if(document.layers){window.captureEvents(Event.MOUSEDOWN);window.onmousedown=function(e){if(e.target==document){return true;};};};};MetafuseMenu.prototype.MMKD=MetafuseMenu_KeyDown;function MetafuseMenu_KeyDown(localEvent,element,menuItemIndex){var keyCode=UITools.GetKeyDown(localEvent);var indices=menuItemIndex.split(",");var menuItem=this.FindMenuItemNode(indices);if(menuItem){if(keyCode==this.NavigateSubMenuKey){if(menuItem.MenuItems!=null&&menuItem.MenuItems.length>0){var lastNodeIndex=menuItem.MenuItems.length-1;var linkRoot="A_"+this.JavaScriptObjectId+"_Item_"+menuItemIndex+",";var nextIndex=new Number(-1);var nextLink=null;var loopCount=0;while(nextLink==null){nextIndex=nextIndex+1;if(nextIndex>lastNodeIndex){break;}nextLink=GetElementById(linkRoot+nextIndex.toString());}UITools.FocusOnElement(nextLink);}}else if(keyCode==this.NavigateParentMenuKey){if(menuItem.ContainerNode!=this){var indiceRoot="";for(var i=0;i<indices.length-1;i++){if(indiceRoot!=""){indiceRoot+=",";}indiceRoot+=indices[i];}UITools.FocusOnElement("A_"+this.JavaScriptObjectId+"_Item_"+indiceRoot);}}else if(keyCode==this.NavigateForward||keyCode==this.NavigateBackward){var lastNodeIndex=menuItem.ContainerNode.MenuItems.length-1;var indiceRoot="";for(var i=0;i<indices.length-1;i++){indiceRoot+=indices[i]+",";}var myIndex=indices[indices.length-1];var nextIndex=new Number(myIndex);var linkRoot="A_"+this.JavaScriptObjectId+"_Item_"+indiceRoot;var nextLink=null;var loopCount=0;if(keyCode==this.NavigateForward){while(nextLink==null){nextIndex=nextIndex+1;if(nextIndex>lastNodeIndex){nextIndex=0;loopCount+=1;if(loopCount==2){break;}}nextLink=GetElementById(linkRoot+nextIndex.toString());}}else{while(nextLink==null){nextIndex=nextIndex-1;if(nextIndex<0){nextIndex=lastNodeIndex;loopCount+=1;if(loopCount==2){break;}}nextLink=GetElementById(linkRoot+nextIndex.toString());}}UITools.FocusOnElement(nextLink);}}return true;};MetafuseMenu.prototype.AjaxLoadChildren=MetafuseMenu_AjaxLoadChildren;function MetafuseMenu_AjaxLoadChildren(element,containerNode){if(containerNode.CurrentlyLoadingChildren==false){containerNode.CurrentlyLoadingChildren=true;var commandEventArgument=containerNode.Indices.toString()+"^"+containerNode.Id+"^^"+containerNode.LoadChildrenDynamicallyEventArgument+"^__ajaxloadchildren";if(!BrowserTools.BrowserIsTabletDevice){element=null;}MAPBB(this.UniqueID,commandEventArgument,false,element);}return false;};MetafuseMenu.prototype.AjaxLoadChildrenResponseHandler=MetafuseMenu_AjaxLoadChildrenResponseHandler
function MetafuseMenu_AjaxLoadChildrenResponseHandler(id,indices,arrayOfMenuItems,dontShowMenu){var containerNode=null;if(id!=null&&id!=""){containerNode=this.FindMenuItemNodeById(id);}if(containerNode==null){indices=indices.split(",");containerNode=this.FindMenuItemNode(indices);}if(containerNode){this.CollapseChildNodesAndRemoveTableElementRecursively(containerNode,false);containerNode.MenuItems=arrayOfMenuItems;if(!dontShowMenu){this.ShowChildMenuItems(containerNode.TableElement,containerNode);}containerNode.CurrentlyLoadingChildren=false;}};MetafuseMenu.prototype.CollapseChildNodesAndRemoveTableElementRecursively=MetafuseMenu_CollapseChildNodesAndRemoveTableElementRecursively
function MetafuseMenu_CollapseChildNodesAndRemoveTableElementRecursively(containerNode,dontRemove){if(containerNode.MenuItems!=null){for(var i=0;i<containerNode.MenuItems.length;i++){this.CollapseChildNodesAndRemoveTableElementRecursively(containerNode.MenuItems[i]);}if(containerNode.ChildElement){UITools.ToggleDisplay(containerNode.ChildElement,true);if(!dontRemove){containerNode.ChildElement.parentNode.removeChild(containerNode.ChildElement);containerNode.ChildElement=null;}}if(containerNode.ChildElementShim){UITools.ToggleDisplay(containerNode.ChildElementShim,true);if(!dontRemove){containerNode.ChildElementShim.parentNode.removeChild(containerNode.ChildElementShim);containerNode.ChildElementShim=null;}}}};MetafuseMenu.prototype.PB=MetafuseMenu_AjaxPostBack;function MetafuseMenu_AjaxPostBack(element,id,commandName,eventArgument,showProcessingMessage,causesValidation){if(this.OnBeforeAjaxMenuItemClickedPostBack(element,commandName,eventArgument)==true){element=GetElementById(element);var indicesArray=element.id.split("_Item_");var indicesString="";if(indicesArray.length>0){indecesString=indicesArray[1];}var commandEventArgument=indecesString+"^"+id+"^"+commandName+"^"+eventArgument;var elementToShowProcessingNear=null;if(showProcessingMessage){elementToShowProcessingNear=element;}MAPBB(this.UniqueID,commandEventArgument,causesValidation,elementToShowProcessingNear);}};MetafuseMenu.prototype.NPB=MetafuseMenu_PostBack;function MetafuseMenu_PostBack(element,commandName,eventArgument,causesValidation){if(this.OnBeforeAjaxMenuItemClickedPostBack(element,commandName,eventArgument)==true){if(causesValidation&&causesValidation==true){if(typeof(Page_ClientValidate)=='function'){if(Page_ClientValidate()==false){return false;}}}else{causesValidation=false;}var indicesString="";if(element){var indicesArray=element.id.split("_Item_");if(indicesArray.length>0){indecesString=indicesArray[1];}}var commandEventArgument=indicesString+"^^"+commandName+"^"+eventArgument+"^"+causesValidation.toString().toLowerCase();__doPostBack(this.UniqueID,commandEventArgument);return true;}};MetafuseMenu.prototype.AppendToResponsiveMenu=MetafuseMenu_AppendToResponsiveMenu;function MetafuseMenu_AppendToResponsiveMenu(divOrUL,includeImagesToDepth,menuItemClass,maxdepth){var div=GetElementById(divOrUL);if(menuItemClass==null||menuItemClass==""){menuItemClass="mainnav-item";}if(div){var $div=$(div);var $ul;if($div[0].tagName=="UL"){$ul=$div;}else{$div.append("<nav><ul class=\"mainnav\"></ul></nav>");$ul=$div.children("NAV")[0];$ul=$($ul).children("UL")[0];$ul=$($ul);}for(var i=0;i<this.MenuItems.length;i++){var menuItem=this.MenuItems[i];var menuItemLI=MetafuseMenu_GetMenuItemResponsiveLI(menuItem,includeImagesToDepth,menuItemClass,1,maxdepth);if(menuItemLI!=""){$ul.append(menuItemLI);}}}};function MetafuseMenu_GetMenuItemResponsiveLI(menuItem,includeImagesToDepth,menuItemClass,depth,maxdepth){if(maxdepth==null){maxdepth=2;}if(depth==null||depth<=0){depth=1;}var includeImage=false;if(includeImagesToDepth!=null&&includeImagesToDepth>=depth){includeImage=true;}if((menuItem.Text==null||menuItem.Text=="")&&(includeImage==false||(includeImage&&(menuItem.Icon==null||menuItem.Icon=="")))){return"";}var li="<li";var css=menuItemClass;var hasChildren=true;if(depth<maxdepth){if(menuItem.MenuItems==null||menuItem.MenuItems.length==0){css+=" mainnav-li-nochildren";hasChildren=false;}li+=" class=\""+css+"\"";}if((!hasChildren||depth==maxdepth)&&menuItem.Click!=null&&menuItem.Click!=""){li+=" onclick=\""+menuItem.Click+"\"";}li+=">";var anchorS="";var anchorE="";if(menuItem.AnchorHref!=null&&menuItem.AnchorHref!=""){anchorS="<a href=\""+menuItem.AnchorHref+"\">";anchorE="</a>";}if(includeImage){if(menuItem.Icon!=null&&menuItem.Icon!=""){if(menuItem.Icon.indexOf("<")==0){li+=anchorS+menuItem.Icon+anchorE;}else{li+=anchorS+"<img src=\""+menuItem.Icon+"\" alt=\"\"/>"+anchorE;}}else{li+=anchorS+"<img src=\""+Root+"/i/c.gif\" alt=\"\"/>"+anchorE;}}if(menuItem.Text!=null&&menuItem.Text!=""){li+=anchorS+menuItem.Text+anchorE;}if(hasChildren&&(maxdepth==null||maxdepth>depth)){li+="<div class=\""+menuItemClass+"-child\" style=\"display:none;\"><ul class=\""+menuItemClass+"-child-section\">";for(var i=0;i<menuItem.MenuItems.length;i++){li+=MetafuseMenu_GetMenuItemResponsiveLI(menuItem.MenuItems[i],includeImagesToDepth,menuItemClass+"-child",depth+1,maxdepth);}li+="</ul></div>";}li+="</li>";return li;};